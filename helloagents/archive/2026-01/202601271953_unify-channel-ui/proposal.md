# 变更提案: unify-channel-ui

## 元信息
```yaml
类型: 优化
方案类型: implementation
优先级: P1
状态: 待定
创建: 2026-01-27
```

---

## 1. 需求

### 背景
当前的渠道管理界面（`channels.html`）中，各个设置项的 UI 风格不统一，混合使用了手风琴、表格、卡片等多种样式，视觉效果较为杂乱，且部分输入框（如 JSON 编辑）缺乏清晰的指引，影响用户体验。

### 目标
统一渠道管理设置项的 UI 风格，使用一致的容器布局和控件样式，提升界面的整洁度和美观度，同时保持原有功能逻辑不变。

### 约束条件
```yaml
时间约束: 无
性能约束: 无明显性能影响
兼容性约束: 必须兼容现有的 Bootstrap 5 样式和交互逻辑
业务约束: 保持所有原有功能正常使用，不得破坏现有业务逻辑
```

### 验收标准
- [ ] 所有设置项（常用、密钥、模型绑定、分组、策略等）使用统一的 UI 容器风格（如卡片或清晰的分区）。
- [ ] 表单控件对齐良好，间距适中。
- [ ] 复杂输入项（JSON 文本域）有清晰的样式和说明。
- [ ] 按钮组样式统一，位置合理。
- [ ] 模态框内的布局结构清晰，不再依赖深层嵌套的手风琴（除非必要）。

---

## 2. 方案

### 技术方案
1.  **重构 UI 结构**: 修改 `internal/admin/templates/channels.html` 文件。
2.  **移除手风琴**: 将原本包裹在 `accordion` 中的各个设置项提取出来，改为垂直排列的独立分区。
3.  **统一容器**: 为每个设置分区（如“常用设置”、“密钥管理”、“模型绑定”等）添加统一的标题和底色/边框样式（使用 Bootstrap 的 Card 或自定义的边框样式）。
4.  **优化列表**: 对于“密钥”和“模型绑定”等列表数据，保持表格样式但优化其在容器中的展示效果。
5.  **优化 JSON 输入**: 为 JSON 配置项（参数改写、Header Override 等）的 `textarea` 添加 monospace 字体样式，并优化辅助说明文字的排版。
6.  **按钮标准化**: 统一操作按钮的大小（`btn-sm`）和图标间距。

### 影响范围
```yaml
涉及模块:
  - Admin UI: 仅修改 HTML 模板，不涉及后端逻辑
预计变更文件: 1 (internal/admin/templates/channels.html)
```

### 风险评估
| 风险 | 等级 | 应对 |
|------|------|------|
| 破坏表单提交路径 | 低 | 严格保持原有 `<form>` 标签的 `action` 和 `input` 的 `name` 属性不变 |
| 样式冲突 | 低 | 使用标准的 Bootstrap 类，避免引入复杂的自定义 CSS |

---

## 3. 技术设计（可选）

无架构变更。

---

## 4. 核心场景

无新场景。

---

## 5. 技术决策

无重大技术决策。