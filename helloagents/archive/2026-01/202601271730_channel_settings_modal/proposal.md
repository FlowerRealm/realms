# 渠道设置弹窗整合（Admin / Channels）

## 背景

当前 `/admin/channels` 渠道列表的行内操作入口以“纯图标按钮”为主，数量较多且语义不直观，用户难以理解每个图标的作用；同时部分配置需要跳转到新页面（如端点配置），打断操作流程。

## 目标

- 将渠道行内的分散图标入口整合到统一的“设置”界面中，降低认知负担。
- “设置”界面以弹窗（modal）形式呈现，避免频繁跳转新页面。
- 保持现有后端语义与路由不变，尽量复用已有表单与接口（渐进式 AJAX）。

## 方案概述

1. **UI 收敛**
   - 在 `/admin/channels` 的每个渠道行，仅保留一个“设置”按钮入口。
   - 将原先分散在行内/下拉菜单中的配置项，集中到同一个“渠道设置”弹窗中，使用 Accordion 折叠分区并补充说明文本。

2. **弹窗内容（按折叠项）**
   - 常用操作：测试连接、5 分钟最高、跳转端点与授权、密钥/授权、模型绑定
   - base_url：在弹窗内直接编辑并保存
   - 分组、请求字段策略、param_override、Header Override、模型后缀保护名单、请求体黑白名单、状态码映射
   - 危险区：删除渠道（保留确认）

3. **后端兼容**
   - `POST /admin/channels/{channel_id}/endpoints` 增加 AJAX(JSON) 分支，支持弹窗内保存 base_url 后不跳转页面。

## 验收标准

- `/admin/channels` 行内不再出现多枚图标入口，统一为“设置”按钮。
- 点击“设置”弹出窗口，能在其中完成常用配置与高级配置保存（AJAX 提示 + 页面可按需 reload）。
- base_url 在弹窗内保存成功后返回 JSON，并能在页面刷新后看到更新结果。
- 文档（`helloagents/modules/*`、`helloagents/CHANGELOG.md`）与代码行为一致。

