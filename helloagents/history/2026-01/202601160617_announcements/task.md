# 任务清单: 公告功能（管理员发布 / 用户只读 / 未读自动弹出 / 已读标记）

目录: `helloagents/plan/202601160617_announcements/`

---

## 1. 数据库与 Store
- [√] 1.1 新增迁移：创建 `announcements` 与 `announcement_reads`
- [√] 1.2 实现 store 封装：创建/列表/发布状态更新/删除、未读查询、已读标记（幂等）

## 2. 用户控制台（Web）
- [√] 2.1 增加用户路由：公告列表/详情/已读标记
- [√] 2.2 Dashboard 注入未读公告数据并自动弹窗
- [√] 2.3 增加 SSR 模板：公告列表页/详情页；侧边栏增加入口

## 3. 管理后台（Admin）
- [√] 3.1 增加管理路由：公告管理页、创建、发布/撤回、删除
- [√] 3.2 增加 SSR 模板：公告管理页；侧边栏增加入口

## 4. 安全检查
- [√] 4.1 权限：管理接口仅 `root`
- [√] 4.2 CSRF：用户标记已读与管理端写操作全部启用
- [√] 4.3 已读标记幂等，且 `redirect` 仅允许站内路径

## 5. 文档同步
- [√] 5.1 更新 `helloagents/wiki/data.md`：补充公告表与已读表
- [√] 5.2 更新 `helloagents/wiki/modules/realms.md`：补充公告入口说明
- [√] 5.3 更新 `helloagents/CHANGELOG.md`：记录新增公告功能

## 6. 验证
- [√] 6.1 运行 `go test ./...`

